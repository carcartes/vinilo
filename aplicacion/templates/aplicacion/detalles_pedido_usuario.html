{% extends "aplicacion/base.html" %}
{% load static %}

{% block content %}
<br><br><br>
<div class="card">
    <div class="card-body">
        <h2>Detalles del Pedido</h2>
        <div class="mb-4">
            <strong>Fecha del Pedido:</strong> {{ pedido.fecha_pedido }}<br>
            <strong>Dirección de Envío:</strong> {{ pedido.direccion_envio.calle }}, {{ pedido.direccion_envio.ciudad }}, {{ pedido.direccion_envio.region }}<br>
            <strong>Estado:</strong> {{ pedido.estado }}
        </div>
        <h4>Artículos Comprados</h4>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Imagen</th>
                    <th>Título del Disco</th>
                    <th>Cantidad</th>
                    <th>Precio Unitario</th>
                </tr>
            </thead>
            <tbody>
                {% for detalle in pedido.detalles.all %}
                <tr>
                    <td><img src="{{ detalle.disco.imagen.url }}" alt="{{ detalle.disco.titulo }}" style="max-width: 100px;"></td>
                    <td>{{ detalle.disco.titulo }}</td>
                    <td>{{ detalle.cantidad }}</td>
                    <td>${{ detalle.disco.precio }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        <div class="mt-3">
            <strong>Total a Pagar:</strong> ${{ total_pedido }}
        </div>
        <br>
        <a href="{% url 'mispedidos' %}" class="btn btn-secondary btn-sm">Volver a Mis Pedidos</a>
    </div>
</div>
{% endblock %}
