{% extends "aplicacion/base.html" %}
{% load static %}

{% block js %}
    <script>
        function eliminarDisco(id){
            Swal.fire({
                title: "¿Estás seguro?",
                text: "Esta acción no se puede deshacer",
                icon: "warning",
                showCancelButton: true,
                cancelButtonText: "No, Cancelar",
                confirmButtonText: "Sí, Eliminar",
                reverseButtons: true,
                confirmButtonColor: "#dc3545"
            }).then(function(result){
                if(result.isConfirmed){
                    window.location.href = "/eliminar-disco/" + id + "/";
                }
            });
        }
    </script>
{% endblock %}

{% block content %}
<br><br><br>
<div class="card">
    <div class="card-body">
        <h2>Listado de discos</h2>
        <a href="{% url "agregar_disco" %}" role='button' class='btn btn-sm text-primary' style="font-weight:bold">+ Agregar Disco</a>
        <div class="table-responsive">
            <table class="table table-striped table-hover table-responsive-sm">
                <thead>
                    <tr>
                        <th>Imagen</th>
                        <th>Título</th>
                        <th>Artista</th>
                        <th>Género</th>
                        <th>Año</th>
                        <th>Precio</th>
                        <th>Stock</th>
                        <th>Opciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in entity %}
                    <tr>
                        <td><img src="{{ p.imagen.url }}" alt="Imagen del disco {{ p.titulo }}" height="100" width="100" class="img-fluid"></td>
                        <td>{{ p.titulo }}</td>
                        <td>{{ p.artista }}</td>
                        <td>{{ p.genero }}</td>
                        <td>{{ p.año_publicacion }}</td>
                        <td>{{ p.precio }}</td>
                        <td>{{ p.stock }}</td>
                        <td>
                            <a href="{% url 'modificar_disco' p.id %}" class="btn btn-info btn-sm">
                                <i class="fas fa-edit"></i> Modificar
                            </a>
                            <a href="#" onclick="eliminarDisco({{ p.id }})" class="btn btn-danger btn-sm">
                                <i class="fas fa-trash-alt"></i> Eliminar
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div>
            {% include 'aplicacion/paginator.html' %}
        </div>
    </div>
</div>
{% endblock %}
